<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>MEDIA ARITMETICA SIMPLE</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>



    </head>
    <body style="background-image: url('fondo.jpg');">
        <ul class="nav justify-content-center" style="padding: 2%; background-color: lightgrey ">
            <h3 style="float: left">Media Aritmetica Simple</h3>
            <li class="nav-item">
                <a class="nav-link active"  onclick="Swal.fire({
                            title: '<p><strong>MEDIA ARITMÉTICA SIMPLE</strong></p>',
                            icon: 'info',
                            html:
                                    'La media aritmética o promedio simple ( X ) muestra el valor central de los datos constituyendo ser la medida de ubicación que más se utiliza. En general, es calculada sumando los valores de interés y dividiendo entre el número de valores sumados.</br> </br>' +
                                    'Ejemplo 1 :</br>' +
                                    'Calcular la media de: 8,9,10,11,16,17,6</br></br>' +
                                    'N= 7 (el número de datos).</br></br>' +
                                    'Aplico la fórmula:</br> </br>'+
                                      '   8+9+10+11+16+17+6                                </br>'+
                                      'X=---------------------------------= </br>'+
                                       '               7                                 </br></br>'+
                                         '   77                          </br>'+
                                      'X=------------------------=11 </br>'+
                                       '      7                                        </br></br>'+
                                     'La media de nuestro conjunto de datos es 11.</br>',
                                    
                            showCloseButton: true,
                            focusConfirm: false,
                            confirmButtonText:
                                    'Entendí!',
                        })">Definición</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="Swal.fire({
                            title: '<strong>MEDIA ARITMÉTICA SIMPLE</strong>',
                            icon: 'info',
                            html:
                                    'Ingrese el rango de datos con el cual se va trabajar,tiene que ser un numero entero entre 8 y 12, en el primer espacio.</br></br> ' +
                                    'Ingrese datos de entrada con los cuales se van trabajar,tienen que ser un numeros enteros de uno o dos digitos, en el segundo espacio.',
                            showCloseButton: true,
                            focusConfirm: false,
                            confirmButtonText:
                                    'Entendí!',
                        })">Ayuda</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html">Menu</a>
            </li>
        </ul>
        <script>
            function getComboA(selectObject) {
                //cantidad de nuemros
                var value = selectObject.value;
                console.log(value);


                //limitar ingreso de datos
                if (value > 12 || value < 8) {

                    document.getElementById("exampleFormControlTextarea1").setAttribute("maxlength", 0);
                } else {
                    document.getElementById("exampleFormControlTextarea1").setAttribute("maxlength", value * 3 - 1);
                }




            }




            function guardar() {
                var person = [];
                var medio = [];
                var str = document.getElementById("exampleFormControlTextarea1").value;




                var var2 = document.getElementById("exampleFormControlInput1").value;

                var2 = parseInt(var2) - 1;
                const texto = document.getElementById('exampleFormControlTextarea1').
                        value.trim().toLowerCase().split('');


                const repeticiones = {};

                // Ciclamos el texto del input y verificamos si existe y sumamos 1, de no existir siempre valdrá 1
                texto.forEach((letra) => {
                    repeticiones[ letra ] = (repeticiones[ letra ] || 0) + 1;
                });

                // Ahora ciclamos el objeto y lo agregamos al resultado
                for (let letra in repeticiones) {

                    const text = `${ letra } = ${ repeticiones[ letra ] }<br>`;
                    if (letra === ",") {

                        if (parseInt(repeticiones[letra]) > parseInt(var2)) {

                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: 'Sobrepasate la cantidad de datos que indicaste ingresar, verifica que la cantidad de datos se la correcta!!'
                            })


                            return false;
                        }
                    } else {
                    }

                }







                for (var i = 0; i < str.length; i++) {
                    person = str.split(",");
                }


                var valor = person.length;
                var tipo = (valor % 2) ? "Impar" : "Par";





                var arr = person;


                function comparar(a, b) {
                    return a - b;
                }
                var enseñar = arr.sort(comparar);
                medio = arr.sort(comparar);

                var maximaVecesQueSeRepite = 0;
                const moda = [];
                var M = [];
                M = person;

                for (var i = 0; i < M.length; i++) {
                    var vecesQueSeRepite = 0;
                    for (var j = 0; j < M.length; j++) {
                        if (M[i] === M[j])
                            vecesQueSeRepite++;
                    }
                    if (vecesQueSeRepite > maximaVecesQueSeRepite) {
                        moda[0] = M[i];
                        maximaVecesQueSeRepite = vecesQueSeRepite;
                    } else if (vecesQueSeRepite === maximaVecesQueSeRepite) { // checks for additional modes
                        if (!moda.includes(M[i])) {    // recognices duplicates

                            moda.push(M[i]);

                        }
                    }
                }



                var tiponom;
                if (moda.length === 0) {
                    tiponom = 'No hay moda';
                } else {
                    if (moda.length === 1) {
                        tiponom = 'Unimodal';
                    }
                    if (moda.length === 2) {
                        tiponom = 'Bimodal';
                    }
                }
                var formula="X=";
                var num1;
                var num2;
                var mediana;
                function sumarNumeros1(n1, n2) {
                    return (parseInt(n1) + parseInt(n2))
                }
                ;
                if (tipo === "Impar") {


                    var half = Math.floor(medio.length / 2);

                    mediana = medio[half];

                    formula = formula+"(" + (medio.length) + "+1)/2=" + sumarNumeros1(half, 1);


                } else {
                    if (tipo === "Par") {
                        function sumarNumeros(n1, n2) {
                            return (parseInt(n1) + parseInt(n2)) / 2.0
                        }
                        ;
                        function median(values) {

                            var half = Math.floor(values.length / 2);


                            num1 = values[half - 1];
                            num2 = values[half];
                            var re = sumarNumeros(num1, num2);

                            return re;

                        }
                        mediana = (median(medio));
                        formula =formula+ "(" + num1 + "+" + num2 + ")" + "/2=" + mediana;



                    }
                }
                formula = "X=(";
                var mediaaritmetica;
                function media(values)
                {
                    var total = 0, res, numDatos, item;
                    numDatos = values.length;
                    for (item = 0; item < numDatos; item++)
                    {
                        total = sumarNumeros1(total, values[item]);
                        if (item === 0) {
                            formula = formula + " " + values[item];
                        } else {
                            formula = formula + "+" + values[item];
                        }


                    }
                    res = (total / numDatos);
                    formula = formula + ")/" + numDatos + "=" + res;
                    return res;
                }

                mediaaritmetica = media(medio);




                var _nom = document.getElementById("exampleFormControlTextarea1").value;

                var fila = "<tr><td>" + mediaaritmetica + "</td><td>" + formula + "</td><td>" + enseñar + "</td></tr>";

                var btn = document.createElement("TR");
                btn.innerHTML = fila;
                document.getElementById("tablita").appendChild(btn);

                //logiga para barra lateral

                const moda2 = [];

                for (var i = 0; i < M.length; i++) {


                    moda2.push(M[i]);


                }



                //grafico 

                var base = document.getElementById("exampleFormControlInput1").value;

                var baseg = [];
                var str = document.getElementById("exampleFormControlTextarea1").value;
                for (var i = 1; i <= 9; i++) {
                    baseg[i] = ' ';
                }
                for (var i = 1; i <= base; i++) {
                    baseg[i] = i;
                }


                var ctx = document.getElementById('myChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [baseg[1].toString(), baseg[2].toString(), baseg[3].toString(), baseg[4].toString(), baseg[5].toString(), baseg[6].toString(), baseg[7].toString(), baseg[8].toString(), baseg[9].toString()],
                        datasets: [{
                                label: 'Resultados',
                                backgroundColor: '#42a5f5',
                                borderColor: 'gray',
                                data: [moda2[0], moda2[1], moda2[2], moda2[3], moda2[4], moda2[5], moda2[6], moda2[7], moda2[8]]
                            }
                        ]},
                    options: {responsive: true}
                });




            }



        </script>
        <div style=" margin: 5% 10% 10% 10% ;">
            <form>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Rango de numeros a ingresar:</label>
                    <input  type="number"  class="form-control" id="exampleFormControlInput1" onchange="getComboA(this)" placeholder="Ingrese un número entero positivo entre 8 y 12!" >
                </div>

                <div class="form-group">
                    <label for="exampleFormControlTextarea1">Ingrese datos de entrada:</label>
                    <textarea  class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Ingrese números separados por coma!" ></textarea>
                </div>
                <button type="button" onclick="guardar()"  class="btn btn-primary">Calcular media aritmetica simple</button>
            </form>
            <table class="table table-dark" style="margin-top: 2%">
                <thead>
                    <tr>
                        <th scope="col">Media Aritmetica Simple</th>
                        <th scope="col">Formula</th>
                        <th scope="col">Orden ascendente</th>
                    </tr>
                </thead>
                <tbody id="tablita">

                </tbody>
            </table>



            <div style="background-color: white">
                <canvas id="myChart"></canvas>
            </div>

            <script src="grafico.js"></script>

        </div>



    </body>
</html>
