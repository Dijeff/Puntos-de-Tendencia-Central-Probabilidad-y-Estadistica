<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Recorrido</title>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>



    </head>
    <body style="background-image: url('fondo.jpg');">
        <ul class="nav justify-content-center" style="padding: 2%; background-color: lightgrey ">
            <h3 style="float: left">Recorrido</h3>
            <li class="nav-item">
                <a class="nav-link active"  onclick="Swal.fire({
                            title: '<p><strong>El Recorrido</strong></p>',
                            icon: 'info',
                            html:
                                    'Se le conoce también como Amplitud total.</br> </br>' +
                                    'Se encarga de medir la variabilidad de un conjunto de observaciones. </br>' +
                                    'Se usa como símbolo R . </br>' +
                                    'Ejemplo 1 :</br>' +
                                    'Recorrido del conjunto {2-3-3-5-5-5-8-10-12}.</br></br>' +
                                    'Escojemos el numero menor y el mayor del conjunto.</br>' +
                                    'R= 12-2 = 10.</br>' +
                                    'R=10.</br>' +
                                    'Así, el 10 es el recorrido. ',
                            showCloseButton: true,
                            focusConfirm: false,
                            confirmButtonText:
                                    'Entendí!',
                        })">Definición</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" onclick="Swal.fire({
                            title: '<strong>Recorrido</strong>',
                            icon: 'info',
                            html:
                                    'Ingrese el rango de datos con el cual se va trabajar,tiene que ser un numero entero entre 12 y 20, en el primer espacio.</br></br> ' +
                                    'Ingrese datos de entrada con los cuales se van trabajar,tienen que ser un numeros enteros de uno o dos digitos, en el segundo espacio.',
                            showCloseButton: true,
                            focusConfirm: false,
                            confirmButtonText:
                                    'Entendí!',
                        })">Ayuda</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html">Menu</a>
            </li>
        </ul>
        <script>
            function getComboA(selectObject) {
                //cantidad de nuemros
                var value = selectObject.value;
                console.log(value);


                //limitar ingreso de datos
                if (value > 20 || value < 12) {

                    document.getElementById("exampleFormControlTextarea1").setAttribute("maxlength", 0);
                } else {
                    document.getElementById("exampleFormControlTextarea1").setAttribute("maxlength", value * 3 - 1);
                }


                //grafico genera



            }
            function guardar() {
                var person = [];

                var str = document.getElementById("exampleFormControlTextarea1").value;
                var var2 = document.getElementById("exampleFormControlInput1").value;
                var2 = parseInt(var2) - 1;
                const texto = document.getElementById('exampleFormControlTextarea1').
                        value.trim().toLowerCase().split('');


                const repeticiones = {};

                // Ciclamos el texto del input y verificamos si existe y sumamos 1, de no existir siempre valdrá 1
                texto.forEach((letra) => {
                    repeticiones[ letra ] = (repeticiones[ letra ] || 0) + 1;
                });

                // Ahora ciclamos el objeto y lo agregamos al resultado
                for (let letra in repeticiones) {

                    const text = `${ letra } = ${ repeticiones[ letra ] }<br>`;
                    if (letra === ",") {

                        if (parseInt(repeticiones[letra]) > parseInt(var2)) {

                            Swal.fire({
                                icon: 'error',
                                title: 'Oops...',
                                text: 'Sobrepasate la cantidad de datos que indicaste ingresar, verifica que la cantidad de datos se la correcta!!'
                            })


                            return false;
                        }
                    } else {
                    }

                }

                function comparar(a, b) {
                    return a - b;
                }
                var valores = [];
                var valoresacomodados = [];




                for (var i = 0; i < 20; i++) {
                    valoresacomodados[i] = "";

                }


                for (var i = 0; i < str.length; i++) {
                    valores = str.split(",");


                }

                valoresacomodados = valores.sort(comparar);


                var primero = valoresacomodados[0];
                var ultimo = valoresacomodados[valoresacomodados.length - 1];
                var resultado = parseInt(ultimo) - parseInt(primero);
                var formula = "R=" + ultimo + "-" + primero + "=" + resultado;
                





                var arr = person;



                var enseñar = arr.sort(comparar);


                var maximaVecesQueSeRepite = 0;
                const moda = [];
                var M = [];
                M = person;

                for (var i = 0; i < M.length; i++) {
                    var vecesQueSeRepite = 0;
                    for (var j = 0; j < M.length; j++) {
                        if (M[i] === M[j])
                            vecesQueSeRepite++;
                    }
                    if (vecesQueSeRepite > maximaVecesQueSeRepite) {
                        moda[0] = M[i];
                        maximaVecesQueSeRepite = vecesQueSeRepite;
                    } else if (vecesQueSeRepite === maximaVecesQueSeRepite) { // checks for additional modes
                        if (!moda.includes(M[i])) {    // recognices duplicates

                            moda.push(M[i]);

                        }
                    }
                }

                var tiponom;

                if (moda.length === 0) {
                    tiponom = 'No hay moda';
                } else {
                    if (moda.length === 1) {
                        tiponom = 'Unimodal';
                    }
                    if (moda.length === 2) {
                        tiponom = 'Bimodal';
                    }
                }




                console.log("La moda es " + moda + " y se repitió " + maximaVecesQueSeRepite + " veces.");


                var _nom = document.getElementById("exampleFormControlTextarea1").value;

                var fila = "<tr><td>" + resultado + "</td><td>" + formula + "</td><td>" + valoresacomodados + "</td></tr>";

                var btn = document.createElement("TR");
                btn.innerHTML = fila;
                document.getElementById("tablita").appendChild(btn);

                //logiga para barra lateral

                const moda2 = [];

                for (var i = 0; i < M.length; i++) {


                    moda2.push(M[i]);


                }



                //grafico 

                var base = document.getElementById("exampleFormControlInput1").value;

                var baseg = [];
                var str = document.getElementById("exampleFormControlTextarea1").value;
                for (var i = 1; i <= 9; i++) {
                    baseg[i] = ' ';
                }
                for (var i = 1; i <= base; i++) {
                    baseg[i] = i;
                }


                var ctx = document.getElementById('myChart').getContext('2d');
                var chart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: [1,2,3,4,5,6,7,8,9,10],
                        datasets: [{
                                label: 'Resultados',
                                backgroundColor: '#42a5f5',
                                borderColor: 'gray',
                                data: [valoresacomodados[0], valoresacomodados[1], valoresacomodados[2], valoresacomodados[3], valoresacomodados[4], valoresacomodados[5], valoresacomodados[6], valoresacomodados[7], valoresacomodados[8],valoresacomodados[9], valoresacomodados[10], valoresacomodados[11], valoresacomodados[12], valoresacomodados[13], valoresacomodados[14], valoresacomodados[15], valoresacomodados[16], valoresacomodados[17], valoresacomodados[18], valoresacomodados[19]]
                            }
                        ]},
                    options: {responsive: true}
                });




            }



        </script>
        <div style=" margin: 5% 10% 10% 10% ;">
            <form>
                <div class="form-group">
                    <label for="exampleFormControlInput1">Rango de numeros a ingresar:</label>
                    <input   type="number"  class="form-control"  id="exampleFormControlInput1" onchange="getComboA(this)" placeholder="Ingrese un número entero positivo entre 12 y 20!" >
                </div>

                <div class="form-group">
                    <label for="exampleFormControlTextarea1">Ingrese datos de entrada:</label>
                    <textarea  class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="Ingrese números separados por coma!" ></textarea>
                </div>
                <button type="button" onclick="guardar()"  class="btn btn-primary">Calcular recorrido</button>
            </form>
            <table class="table table-dark" style="margin-top: 2%">
                <thead>
                    <tr>
                        <th scope="col">Recorrido</th>
                        <th scope="col">Formula</th>
                        <th scope="col">Orden ascendente</th>
                    </tr>
                </thead>
                <tbody id="tablita">

                </tbody>
            </table>



            <div style="background-color: white">
                <canvas id="myChart"></canvas>
            </div>

            <script src="grafico.js"></script>
            <script>


            </script> 
        </div>



    </body>
</html>